{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '43997870-ac002090f9f8b16e802d8cd1f';\naxios.defaults.baseURL = 'https://pixabay.com/api/'; \n\nexport const fetchPhotosByPixabay = (query, page) => {\n    const searchParams = {\n        q: query,\n        key: API_KEY,\n        image_type: 'photo',\n        safesearch: 'true',\n        orientation: 'horizontal',\n        per_page: 15,\n        page: page,\n    };\n\n    return axios.get('', { params: { ...searchParams } })\n        .then(response => response.data)\n        .catch(error => {\n            console.error('Error fetching photos:', error);\n            throw new Error('Failed to fetch photos from Pixabay API');\n        });\n}\n","export const createGallery = (images) => {\n    return images.map((image) => {\n    return `<li class=\"img-card\">\n            <a href=\"${image.largeImageURL}\" class=\"card-link\">\n                <img \n                class=\"img\"\n                src=\"${image.largeImageURL}\" \n                alt=\"${image.tags}\">\n            </a>\n        <ul class=\"params-list\">\n            <li class=\"params-items\"> \n                <h2 class=\"item-subtitle\">Likes</h2> \n                <p class=\"item-counter\">${image.likes}</p>\n            </li>\n            <li class=\"params-items\">\n                <h2 class=\"item-subtitle\">Views</h2>\n                <p class=\"item-counter\">${image.views}</p>\n            </li>\n            <li class=\"params-items\">\n                <h2 class=\"item-subtitle\">Comments</h2>\n                <p class=\"item-counter\">${image.comments}</p>\n            </li>\n            <li class=\"params-items\">\n                <h2 class=\"item-subtitle\">Downloads</h2>\n                <p class=\"item-counter\">${image.downloads}</p>\n            </li>\n        </ul>`\n    }).join('');\n}\n","const refs = {\n    form: document.querySelector('.form'),\n    galleryList: document.querySelector('.card-list'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more')\n}\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"; \nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchPhotosByPixabay } from \"./js/pixabay-api\";\nimport { createGallery } from \"./js/render-functions\";\n\nconst lightbox = new SimpleLightbox('.card-list a');\n\nlet counterPages = 1;\nlet searchKeyword = '';\n\nrefs.loadMoreBtn.style.display = 'none';\n\nfunction showMessage() {\n    iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        maxWidth: '300px'\n    });\n}\n\nasync function onSearchFormSubmit(event) {\n    event.preventDefault();\n    searchKeyword = event.target.elements.searchKeywords.value.trim();\n    if (searchKeyword === '') {\n        showMessage();\n        refs.galleryList.innerHTML = '';\n        return;\n    }\n    refs.loader.classList.remove('is-hidden');\n\n    try {\n        const imagesData = await fetchPhotosByPixabay(searchKeyword);\n        if (imagesData.hits.length === 0) {\n            showMessage();\n            refs.galleryList.innerHTML = '';\n            return;\n        }\n        const markup = createGallery(imagesData.hits);\n        refs.galleryList.innerHTML = markup;\n        lightbox.refresh();\n        refs.loadMoreBtn.style.display = 'block';\n    } catch (error) {\n        console.error('Error:', error);\n    } finally {\n        event.target.reset();\n        refs.loader.classList.add('is-hidden');\n    }\n}\n\nasync function onLoadMoreClick() {\n    refs.loader.classList.remove('is-hidden');\n    try {\n        const imagesData = await fetchPhotosByPixabay(searchKeyword, counterPages + 1);\n        if (imagesData.hits.length > 0) {\n            const markup = createGallery(imagesData.hits);\n            refs.galleryList.insertAdjacentHTML('beforeend', markup);\n            lightbox.refresh();\n            counterPages += 1;\n            if (counterPages * 15 >= imagesData.totalHits) {\n                refs.loadMoreBtn.style.display = 'none';\n                showMessage(\"We're sorry, but you've reached the end of search results.\");\n            }\n            smoothScroll();\n        } else {\n            showMessage();\n        }\n    } catch (error) {\n        console.error('Error:', error);\n    } finally {\n        refs.loader.classList.add('is-hidden');\n    }\n}\n\nfunction smoothScroll() {\n    const cardHeight = refs.galleryList.querySelector('.img-card').getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n}\n\n\n\n\n\nrefs.form.addEventListener('submit', onSearchFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n"],"names":["API_KEY","axios","fetchPhotosByPixabay","query","page","searchParams","response","error","createGallery","images","image","refs","lightbox","SimpleLightbox","counterPages","searchKeyword","showMessage","iziToast","onSearchFormSubmit","event","imagesData","markup","onLoadMoreClick","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAuB,CAACC,EAAOC,IAAS,CACjD,MAAMC,EAAe,CACjB,EAAGF,EACH,IAAKH,EACL,WAAY,QACZ,WAAY,OACZ,YAAa,aACb,SAAU,GACV,KAAMI,CACd,EAEI,OAAOH,EAAM,IAAI,GAAI,CAAE,OAAQ,CAAE,GAAGI,CAAY,EAAI,EAC/C,KAAKC,GAAYA,EAAS,IAAI,EAC9B,MAAMC,GAAS,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,yCAAyC,CACrE,CAAS,CACT,ECtBaC,EAAiBC,GACnBA,EAAO,IAAKC,GACZ;AAAA,uBACYA,EAAM,aAAa;AAAA;AAAA;AAAA,uBAGnBA,EAAM,aAAa;AAAA,uBACnBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKSA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,0CAIdA,EAAM,SAAS;AAAA;AAAA,cAGpD,EAAE,KAAK,EAAE,EC3BRC,EAAO,CACT,KAAM,SAAS,cAAc,OAAO,EACpC,YAAa,SAAS,cAAc,YAAY,EAChD,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,YAAY,CACpD,EASMC,EAAW,IAAIC,EAAe,cAAc,EAElD,IAAIC,EAAe,EACfC,EAAgB,GAEpBJ,EAAK,YAAY,MAAM,QAAU,OAEjC,SAASK,GAAc,CACnBC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,SAAU,OAClB,CAAK,CACL,CAEA,eAAeC,EAAmBC,EAAO,CAGrC,GAFAA,EAAM,eAAc,EACpBJ,EAAgBI,EAAM,OAAO,SAAS,eAAe,MAAM,OACvDJ,IAAkB,GAAI,CACtBC,IACAL,EAAK,YAAY,UAAY,GAC7B,MACH,CACDA,EAAK,OAAO,UAAU,OAAO,WAAW,EAExC,GAAI,CACA,MAAMS,EAAa,MAAMlB,EAAqBa,CAAa,EAC3D,GAAIK,EAAW,KAAK,SAAW,EAAG,CAC9BJ,IACAL,EAAK,YAAY,UAAY,GAC7B,MACH,CACD,MAAMU,EAASb,EAAcY,EAAW,IAAI,EAC5CT,EAAK,YAAY,UAAYU,EAC7BT,EAAS,QAAO,EAChBD,EAAK,YAAY,MAAM,QAAU,OACpC,OAAQJ,EAAO,CACZ,QAAQ,MAAM,SAAUA,CAAK,CACrC,QAAc,CACNY,EAAM,OAAO,QACbR,EAAK,OAAO,UAAU,IAAI,WAAW,CACxC,CACL,CAEA,eAAeW,GAAkB,CAC7BX,EAAK,OAAO,UAAU,OAAO,WAAW,EACxC,GAAI,CACA,MAAMS,EAAa,MAAMlB,EAAqBa,EAAeD,EAAe,CAAC,EAC7E,GAAIM,EAAW,KAAK,OAAS,EAAG,CAC5B,MAAMC,EAASb,EAAcY,EAAW,IAAI,EAC5CT,EAAK,YAAY,mBAAmB,YAAaU,CAAM,EACvDT,EAAS,QAAO,EAChBE,GAAgB,EACZA,EAAe,IAAMM,EAAW,YAChCT,EAAK,YAAY,MAAM,QAAU,OACjCK,EAAY,4DAA4D,GAE5EO,GACZ,MACYP,GAEP,OAAQT,EAAO,CACZ,QAAQ,MAAM,SAAUA,CAAK,CACrC,QAAc,CACNI,EAAK,OAAO,UAAU,IAAI,WAAW,CACxC,CACL,CAEA,SAASY,GAAe,CACpB,MAAMC,EAAab,EAAK,YAAY,cAAc,WAAW,EAAE,sBAAuB,EAAC,OACvF,OAAO,SAAS,CACZ,IAAKa,EAAa,EAClB,SAAU,QAClB,CAAK,CACL,CAMAb,EAAK,KAAK,iBAAiB,SAAUO,CAAkB,EACvDP,EAAK,YAAY,iBAAiB,QAASW,CAAe"}